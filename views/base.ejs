<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title><%= config.title %></title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style type="text/css">
    body {
      margin: 20px;
    }
    a:link, a:visited {
      text-decoration: none;
      color: rgb(96, 143, 219);
    }
    a:hover, a:active {
      text-decoration: underline;
    }
    .id {
      font-family: monospace;
    }
    table {
       border-collapse: collapse;
    }
    tr {
      border-bottom: 1px solid #ddd;
      text-align: left;
    }
    td {
      padding: 0.25em;
    }
    ul.inline {
      display: inline-block;
      padding: 0;
    }
    ul.inline > li {
      display: inline;
    }
    ul.inline > li:not(:last-child)::after  {
      content: ", ";
    }
    </style>
  </head>
  <body>
    <h1><%= config.title %></h1>
    <p>
      <%= config.description %>
    </p>
    <h3>API Endpoints</h3>
    <ul>
      <li>GET <a href="validate">/validate</a> - validate data (<a href="https://github.com/gbv/validation-server#get-validate" target="_blank">documentation</a>)</li>
      <li>POST /validate - validate data (<a href="https://github.com/gbv/validation-server#post-validate" target="_blank">documentation</a>)</li>
      <li>GET <a href="formats">/formats</a> - list supported data formats (<a href="https://github.com/gbv/validation-server#get-formats" target="_blank">documentation</a>)</li>
      <li>GET <a href="schema">/schema</a> - get a schema file (<a href="https://github.com/gbv/validation-server#get-schema" target="_blank">documentation</a>)</li>
      <li>GET <a href="types">/types</a> - list supported schema types (<a href="https://github.com/gbv/validation-server#get-types" target="_blank">documentation</a>)</li>
    </ul>
    <h3>Formats</h3>
    <p>The following data formats can be validated:</p>
    <table>
      <thead>
        <tr>
          <th>id</th>
          <th>name</th>
          <th>versions</th>
          <th>for</th>
        </tr>
      </thead>
      <tbody>
      <% for (var format of config.formats) { %>
        <tr>
          <td>
            <a href="formats?format=<%= format.id %>" class="id"><%= format.id %></a>
          </td>
          <td>
          <% if (format.title) { %>
            <% if (format.homepage) { %>
              <a href="<%= format.homepage %>" target="_blank"><%= format.title %></a>
            <% } else { %>
              <%= format.title %>
            <% } %>
          <% } %>
          </td>
          <td>
            <% if (format.schemas) { %>
            <ul class="inline">
              <% for (var schema of format.schemas) {
                version = schema.version || "default"
              %>
              <li>
                <a href="schema?format=<%= format.id %>&version=<%= version %>"><%= version %></a>
              </li>
              <% } %>
            </ul>
            <% } %>
          </td>
          <td>
            <% if (format.for) { %>
              <ul class="inline">
              <% for (var id of Array.isArray(format.for) ? format.for : [format.for]) { %>
                <li><%= id %></li>
              <% } %>
              </ul>
            <% } %>
          </td>
        </tr>
      <% } %>
      </tbody>
    </table>
  </body>
  <footer>
    <p>
      Powered by <a href="https://github.com/gbv/validation-server" target="_blank">validation-server</a> version <%= config.version %>.
    </p>
    </p>
  </footer>
</html>
